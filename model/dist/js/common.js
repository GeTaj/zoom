new Vue({el:"#app",data:function(){return{title:"股票数据浏览器",filterText:"",tableHeight:400,toggleShowHeader:!0,loading:!1,toggleDeleteColumn:!0,selectedColumn:"",data2:[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,prop:"x2",label:"三级 1-1-1"},{id:10,prop:"x2",label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,prop:"x2",label:"二级 2-1"},{id:6,prop:"x2",label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,prop:"x2",label:"二级 3-1"},{id:8,prop:"x2",label:"二级 3-2"}]},{id:11,label:"一级 4",children:[{id:7,prop:"x2",label:"二级 4-1"},{id:8,prop:"x1",label:"二级 4-2"}]}],defaultProps:{children:"children",label:"label"},tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],tableHeadData:[{prop:"date",label:"日期"},{prop:"name",label:"姓名"},{prop:"address",label:"地址"}]}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},mounted:function(){this.calcTableHeight();var e=this;window.onresize=function(){return void(e.tableHeight=e.$refs.tableBox.clientHeight-40)}},methods:{filterNode:function(e,a){return!e||-1!==a.label.indexOf(e)},addColumn:function(e,a,l){if("0"==a.childNodes.length){var t=this,d=0;0!=this.tableHeadData.length?Array.prototype.forEach.call(this.tableHeadData,function(a,l){a.label!=e.label&&d++,d==t.tableHeadData.length&&t.tableHeadData.push({prop:e.prop,label:e.label}),l==t.tableHeadData.length-1&&t.$message({message:"请勿重复添加指标！",type:"warning"})}):t.tableHeadData.push({prop:e.prop,label:e.label})}},clearColumn:function(){this.tableHeadData=[]},calcTableHeight:function(){this.tableHeight=this.$refs.tableBox.clientHeight-40},pullData:function(){var e=this;this.loading=!0,setTimeout(function(){e.tableData3.push.apply(e.tableData3,e.tableData3),e.loading=!1},1e3)},toggleThead:function(e){},activeColumn:function(e,a){e.label==this.selectedColumn?this.toggleDeleteColumn=!this.toggleDeleteColumn:(this.selectedColumn=e.label,this.toggleDeleteColumn=!1)},deleteColumn:function(){var e=this;Array.prototype.forEach.call(this.tableHeadData,function(a,l){console.log(e.selectedColumn),a.label==e.selectedColumn&&(e.tableHeadData.splice(l,1),e.toggleDeleteColumn=!e.toggleDeleteColumn)})}}});